<div class="container">
  <h1>Preemptive Priority Scheduling</h1>
  <div class="description-card">
    <h3>üìò How Preemptive Priority Scheduling Works</h3>
    <ul>
      <li>Processes are selected based on <strong>priority</strong> (lower number = higher priority).</li>
      <li>When a new process arrives, it <strong>interrupts</strong> the current one if it has higher priority.</li>
      <li>The CPU always runs the highest priority <strong>ready</strong> process.</li>
      <li>This leads to frequent <strong>context switching</strong>.</li>
      <li><strong>Completion Time (CT)</strong> = When a process finishes after preemptions.</li>
      <li><strong>Turnaround Time (TAT)</strong> = CT ‚àí Arrival Time.</li>
      <li><strong>Waiting Time (WT)</strong> = TAT ‚àí Total Burst Time.</li>
    </ul>
  </div>

  <!-- Form Section -->
  <div class="form-section">
    <input [(ngModel)]="name" type="text" placeholder="Process Name" />
    <input [(ngModel)]="arrival" type="number" placeholder="Arrival Time" />
    <input [(ngModel)]="burst" type="number" placeholder="Burst Time" />
    <input [(ngModel)]="priority" type="number" placeholder="Priority (Lower is Higher)" />
    <button (click)="addProcess()">Add Process</button>
  </div>

  <!-- Table -->
  <table *ngIf="processes.length > 0">  <!--created only if thr are more than 1 process-->
    <thead>
      <tr>
        <th>Process</th>
        <th>Arrival</th>
        <th>Burst</th>
        <th>Priority</th>
        <th>Remove</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of processes; let i = index">
        <td>{{p.name}}</td>
        <td>{{p.arrival}}</td>
        <td>{{p.burst}}</td>
        <td>{{p.priority}}</td>
        <td><button (click)="remove(i)">üóëÔ∏è</button></td>
      </tr>
    </tbody>
  </table>

  <!-- run Button -->
  <button class="run-btn" (click)="simulate()">Run Simulation</button>

  <!-- Ready Queue -->
  <div class="ready-queue-section">
    <h3>üì• Ready Queue</h3>
    <div class="ready-queue">
      <div
        *ngFor="let block of readyQueueBlocks; let i = index"
        class="process-button"
        [ngClass]="'process-' + block.name"
        [style.animationDelay]="(i * 2.0) + 's'"
        style="opacity: 1;">
        {{ block.name }}
      </div>
    </div>
  </div>

  <!-- Gantt Chart  loops through it delay each animation by 0.8 sec *i(one by one entry)-->
  <div class="gantt-section">
    <h3>üìä Gantt Chart</h3>
    <div class="gantt-chart">
      <div
        *ngFor="let block of ganttChart; let i = index"
        class="process-button"
        [ngClass]="'process-' + block.name"
        [style.animationDelay]="(i * 2.0) + 's'"
        style="opacity: 1;">
        {{ block.name }}
      </div>
    </div>
  </div>

  <!-- Results -->
  <div class="result-section" *ngIf="showResults">
    <h3>Process Results</h3>
    <table>
      <thead>
        <tr>
          <th>Process</th>
          <th>Arrival Time</th>
          <th>Burst Time</th>
          <th>Priority</th>
          <th>Completion Time</th>
          <th>Waiting Time(TAT ‚àí Total Burst Time)</th>
          <th>Turnaround Time(CT ‚àí Arrival Time)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of processes">
          <td>{{ p.name }}</td>
          <td>{{ p.arrival }}</td>
          <td>{{ p.burst }}</td>
          <td>{{ p.priority }}</td>
          <td>{{ p.completion }}</td>
          <td>{{ p.waiting }}</td>
          <td>{{ p.turnaround }}</td>
        </tr>
      </tbody>
    </table>

    <div class="averages">
      <p><strong>Average Waiting Time:</strong> {{ avgWT }}<br />
      <strong>Average Turnaround Time:</strong> {{ avgTAT }}</p>
    </div>
  </div>
</div>
